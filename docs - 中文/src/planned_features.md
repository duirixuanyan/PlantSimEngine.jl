# 路线图

## 计划中的主要功能

### 可变时间步长

目前，所有模型都需要使用相同的时间步长。然而，植物内部的一些生理现象往往以小时为单位进行，其他则更慢。而气象数据通常是按天提供的。根据模型启用不同的时间步长已在开发计划中，并被列为下一个重要的里程碑。

### 多植株/多物种模拟

PlantSimEngine 的一个目标是能够模拟包含多个植株（可能属于不同物种）数据的复杂场景，以应用于农林复合系统等场景。

当前的实现还不支持灵活地声明多种植物，或让多个植株基于一部分相同，另一部分不同的模型或参数来进行建模。

## 次要功能

- 实现一个 trait 或预处理检查，以判断是否需要气象数据，并确保需要时已正确提供到模拟中
- 更好的依赖图可视化和信息输出

## 次要改进与易用性提升

- 改进并统一 Mapping API，支持多尺度依赖声明
- 改善用户报错信息
- 添加更多示例
- 优化依赖关系图的遍历功能
- 确保循环依赖检查与 PreviousTimestep 在 ModelLists 中生效

## 测试方面的改进

- 更好地追踪内存使用和类型稳定性
- 完善 CI / 下游测试
- 实现状态机检查器，用于验证输出的不变量
- 实现图结构模糊测试，以改进边界情况测试

## 可能的功能（当前优先级较低）

- 支持迭代式构建与验证映射和 ModelList 的 API
- 模型的构建步骤，例如：提供一个函数，将映射或 ModelList 写入 Julia 脚本，实现验证、提升可读性，甚至也许能提升性能（不再需要遍历依赖图）
- 并行化改进
- 在单一尺度下重新引入多对象并行计算

## 其他小点

- 浮点数累计误差的示例或解决方案
- 更多关于拟合/类型转换/误差传播的示例
- MTG 一些新特性 #106
- 其他小的 bug
- run! 函数的展开

## 其它

- 复现其他 FSPM 吗？
- 扩散模型示例？

完整问题列表可见 [这里](https://github.com/VirtualPlantLab/PlantSimEngine.jl/issues)